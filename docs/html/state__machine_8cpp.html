<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rt2_assignment1: src/state_machine.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rt2_assignment1
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Package for the assignment of the course</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">state_machine.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>state machine for rt2_assignment1 control  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;ros/ros.h&quot;</code><br />
<code>#include &quot;rt2_assignment1/Command.h&quot;</code><br />
<code>#include &quot;rt2_assignment1/RandomPosition.h&quot;</code><br />
<code>#include &lt;rt2_assignment1/PositionAction.h&gt;</code><br />
<code>#include &lt;actionlib/client/simple_action_client.h&gt;</code><br />
<code>#include &lt;actionlib/client/terminal_state.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for state_machine.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="state__machine_8cpp__incl.png" border="0" usemap="#src_2state__machine_8cpp" alt=""/></div>
<map name="src_2state__machine_8cpp" id="src_2state__machine_8cpp">
<area shape="rect" title="state machine for rt2_assignment1 control" alt="" coords="511,5,679,32"/>
<area shape="rect" title=" " alt="" coords="5,87,84,114"/>
<area shape="rect" title=" " alt="" coords="108,87,323,114"/>
<area shape="rect" title=" " alt="" coords="347,87,601,114"/>
<area shape="rect" title=" " alt="" coords="625,80,811,121"/>
<area shape="rect" title=" " alt="" coords="836,80,1003,121"/>
<area shape="rect" title=" " alt="" coords="1027,80,1204,121"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1a9543636935547580c0657f4c7c0c2b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="state__machine_8cpp.html#a1a9543636935547580c0657f4c7c0c2b">user_interface</a> (rt2_assignment1::Command::Request &amp;req, rt2_assignment1::Command::Response &amp;res)</td></tr>
<tr class="memdesc:a1a9543636935547580c0657f4c7c0c2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">server callback of '/user_interface'.  <a href="state__machine_8cpp.html#a1a9543636935547580c0657f4c7c0c2b">More...</a><br /></td></tr>
<tr class="separator:a1a9543636935547580c0657f4c7c0c2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="state__machine_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:a3c04138a5bfe5d72780bb7e82a18e627"><td class="mdescLeft">&#160;</td><td class="mdescRight">main function  <a href="state__machine_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">More...</a><br /></td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab376b87f96a574a793c03c53e75afec8"><td class="memItemLeft" align="right" valign="top"><a id="ab376b87f96a574a793c03c53e75afec8"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="state__machine_8cpp.html#ab376b87f96a574a793c03c53e75afec8">start</a> = false</td></tr>
<tr class="memdesc:ab376b87f96a574a793c03c53e75afec8"><td class="mdescLeft">&#160;</td><td class="mdescRight">start flag <br /></td></tr>
<tr class="separator:ab376b87f96a574a793c03c53e75afec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af287bc8596383f162b2b900a54c7ee4a"><td class="memItemLeft" align="right" valign="top"><a id="af287bc8596383f162b2b900a54c7ee4a"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="state__machine_8cpp.html#af287bc8596383f162b2b900a54c7ee4a">cancel</a> = true</td></tr>
<tr class="memdesc:af287bc8596383f162b2b900a54c7ee4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">cancel goal flag <br /></td></tr>
<tr class="separator:af287bc8596383f162b2b900a54c7ee4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b6b55007148a091271bfff279c47ab3"><td class="memItemLeft" align="right" valign="top"><a id="a8b6b55007148a091271bfff279c47ab3"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="state__machine_8cpp.html#a8b6b55007148a091271bfff279c47ab3">n_target</a> = true</td></tr>
<tr class="memdesc:a8b6b55007148a091271bfff279c47ab3"><td class="mdescLeft">&#160;</td><td class="mdescRight">new target flag <br /></td></tr>
<tr class="separator:a8b6b55007148a091271bfff279c47ab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>state machine for rt2_assignment1 control </p>
<dl class="section author"><dt>Author</dt><dd>Juri Khanmeh </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>25/09/2021</dd></dl>
<p>Services : <br  />
 ° /user_interface ° /position_server ° /go_to_point</p>
<p>Description :</p>
<p>This file defines the state machine of rt2_assignment1 control. Once this node receives a command to start the random movement, it calls '/position_server'. The server '/position_server' returns a random position. Once the node receives the random position, it calls the '/go_to_point' with target request. If the node receives a command to stop the random movement, it cancels the goal. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>main function </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td></td></tr>
    <tr><td class="paramname">argv</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>always true.</dd></dl>
<p>The main function initializes the node, creates a '/user_interface' service server, '/position_server' service client and '/go_to_point' simple action client. Then in the main while loop, it checks whether the command is "start" or "stop". If it is "start", it calls '/position_server' to get a random position. Then it sends this random position as a target request to '/go_to_point' action server. If the goal is reached, it repeats the same process again. If the goal was interupted it stops the process and waits for the new command to turn to "start" again. </p>

</div>
</div>
<a id="a1a9543636935547580c0657f4c7c0c2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a9543636935547580c0657f4c7c0c2b">&#9670;&nbsp;</a></span>user_interface()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool user_interface </td>
          <td>(</td>
          <td class="paramtype">rt2_assignment1::Command::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rt2_assignment1::Command::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>server callback of '/user_interface'. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">&amp;req</td><td>is Command::Request which is the command ["start"/"stop"]. </td></tr>
    <tr><td class="paramname">&amp;res</td><td>is Command::Response is a boolean 'True' when the request is received. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>always true as this method cannot fail.</dd></dl>
<p>This function sets the global variable 'start' to true if the request was "start" otherwise it sets it to false. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
